_target_: cyto_dl.datamodules.DataframeDatamodule
_convert_: all

path: /allen/aics/modeling/ritvik/pcna_center_dna2/register/manifest.csv
split_column: split

batch_size: 64
num_workers: 10
multiprocessing_context: spawn
persistent_workers: true

# Registered images in this dataset have the following channels
# ['bf', 'dna', 'membrane', 'structure', 'dna_segmentation', 'membrane_segmentation', 'struct_segmentation_roof']
#
# And the dimensions of each level are (ZYX)
# 0: [129, 238, 374]
# 1: [ 64, 119, 187]
# 2: [ 32,  60,  94]

transforms:
  - _target_: cyto_dl.dataframe.transforms.GroupCols
    groups:
      image: registered_path
      cell_id: CellId
  - _target_: monai.transforms.LoadImaged
    keys: [image]
    reader:
      _target_: cyto_dl.image.io.OmeZarrReader
      level: 0
      channels: ["PCNA_segmentation"]
    expanduser: false
  - _target_: monai.transforms.SpatialPadd
    keys: [image]
    spatial_size: [181, 181, 181]
  - _target_: torchio.transforms.Resize
    keys:
      - image
    target_shape: 28
  - _target_: monai.transforms.ToTensord
    keys: [image]
    track_meta: false
